<!doctype html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
 
    <link rel="stylesheet" href="css/fw2020.css">
    
    
   <title>Main APIs - RubyGateway 6.1.0 docs</title>
    
  </head>
  <body class="j2-swift " data-root-path="./" data-doc-path="main-apis.html" data-assets-path="">

  <!-- messages for search -->
  <div hidden>
    <span id="text-loading">Loading index...</span>
    <span id="text-failed">Failed to load index</span>
    <span id="text-notfound">No matches</span>
  </div>

  <header class="j2-header">
  <div class="navbar navbar-expand navbar-dark j2-titlebar">
  <div class="container-fluid ps-0 pe-0">
  <a class="visually-hidden-focusable visually-hidden fw-slightly-bold pe-2" href="#main-content">Skip to main content</a>
  <a class="nav-item nav-link ps-0 pt-1 pe-2 d-md-none" id="nav-toggle-button" role="button" aria-controls="nav-column" aria-expanded="false" aria-label="Toggle navigation" href="#">
    <span class="navbar-toggler-icon"></span>
  </a>

  <div class="navbar-brand me-1 fw-slightly-bold">
    
    <a href="index.html">
    
    RubyGateway 6.1.0 docs</a>
  </div>
  
  <span class="navbar-text j2-coverage fw-slightly-bold small d-none d-lg-inline-block me-2">(100% documented)</span>
  

  <div class="navbar-nav ms-auto justify-content-end flex-fill">

    
    <form class="d-none d-md-block my-auto pe-2 ps-2" role="search">
      <input class="form-control form-control-sm w-100" type="search" placeHolder="Search" aria-label="Search" aria-keyshortcuts="/" data-search-format="span">
    </form>
    

    

    
    <a class="nav-item nav-link d-none d-sm-inline" rel="external" href="https://github.com/johnfairh/RubyGateway">
      <svg class="j2-title-svg" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 16 16"><title>Open on GitHub</title><path fill="currentcolor" fill-rule="evenodd" d="M8 0C3.58 0 0 3.58 0 8c0 3.54 2.29 6.53 5.47 7.59.4.07.55-.17.55-.38 0-.19-.01-.82-.01-1.49-2.01.37-2.53-.49-2.69-.94-.09-.23-.48-.94-.82-1.13-.28-.15-.68-.52-.01-.53.63-.01 1.08.58 1.23.82.72 1.21 1.87.87 2.33.66.07-.52.28-.87.51-1.07-1.78-.2-3.64-.89-3.64-3.95 0-.87.31-1.59.82-2.15-.08-.2-.36-1.02.08-2.12 0 0 .67-.21 2.2.82.64-.18 1.32-.27 2-.27.68 0 1.36.09 2 .27 1.53-1.04 2.2-.82 2.2-.82.44 1.1.16 1.92.08 2.12.51.56.82 1.27.82 2.15 0 3.07-1.87 3.75-3.65 3.95.29.25.54.73.54 1.48 0 1.07-.01 1.93-.01 2.2 0 .21.15.46.55.38A8.013 8.013 0 0 0 16 8c0-4.42-3.58-8-8-8z"/>
      </svg>
    </a>
    
    
    
    

    
      <a class="nav-item nav-link d-none d-sm-inline" rel="alternate" href="dash-feed://https%3A%2F%2Fjohnfairh%2Egithub%2Eio%2FRubyGateway%2Fdocsets%2FRubyGateway%2Exml">
      <svg class="j2-title-svg" xmlns="http://www.w3.org/2000/svg" width="22" height="22" viewBox="0 0 700 670">
        <title>Open in Dash</title>
        <path fill="currentcolor" d="m0 0 132.58 160.54h130.76v0.0312c63.501 0.196 140.87-6.9887 193.12 10.227 26.125 8.6076 43.475 19.899 57.578 40.781 14.103 20.882 26.733 55.737 25.781 118.52-0.8784 57.953-16.7 88.91-38.672 112.89-21.972 23.98-54.208 41.154-90.703 51.953-28.462 8.4219-55.314 10.153-80.547 11.953v-266.25h-160v419.92l71.328 7.8125s103.75 12.802 214.61-20c55.429-16.401 115.46-45.078 163.28-97.266 47.816-52.187 79.327-127.83 80.703-218.59 1.3028-85.935-16.743-156.6-53.125-210.47-36.382-53.871-89.369-86.47-140.16-103.2-50.787-16.733-101.87-18.272-145.08-18.504-43.211-0.2316-78.502 0.0768-97.578 0.0176v2e-3h-131.31z"/>
      </svg>
    </a>
    

    

  </div>
  </div>
</div>

<!-- narrow-style searchbar -->


<div class="container-fluid j2-titlebar d-md-none">
  <div class="row">
    <div class="col">
      <form class="pb-2">
        <input class="form-control form-control-sm" type="search" placeHolder="Search" aria-label="Search" aria-keyshortcuts="/" data-search-format="div">
      </form>
    </div>
  </div>
</div>


  <nav aria-label="breadcrumb" class="small">
  
  
    <ol class="breadcrumb j2-breadcrumb j2-swift">
      <li class="breadcrumb-item"><a href="index.html">RubyGateway</a></li>
      
        
        
          <li class="breadcrumb-item" aria-current="page">Main APIs</li>
        
      
    </ol>
  
</nav>

  </header>

  <div class="container-fluid">
    <div class="row">
      <div class="col-auto d-none d-md-flex flex-column j2-nav" id="nav-column">
  
    <nav aria-label="Swift" class="j2-swift">
    <ul class="j2-nav-list">
      
      <li class="j2-nav-group">
        

  <a class="j2-nav-item" href="guides.html?swift">Guides</a>


  <ul class="j2-nav-sublist">
  
  <li>
    

  <a class="j2-nav-item" href="guides/user-guide.html?swift">User Guide</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="guides/todo.html?swift">TODO</a>



  </li>
  
</ul>



      </li>
      
      <li class="j2-nav-group">
        
  <a class="j2-nav-item active" href="#" aria-current="page">Main APIs</a>



  <ul class="j2-nav-sublist">
  
  <li>
    

  <a class="j2-nav-item" href="types/rbgateway1.html?swift">RbGateway</a>


  <ul class="j2-nav-sublist">
  
  <li>
    

  <a class="j2-nav-item" href="types/rbgateway1/verbosity.html?swift">Verbosity</a>



  </li>
  
</ul>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="types/rbobject13.html?swift">RbObject</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="types/rbobjectaccess1.html?swift">RbObjectAccess</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="types/rbobjectcollection.html?swift">RbObjectCollection</a>



  </li>
  
</ul>



      </li>
      
      <li class="j2-nav-group">
        

  <a class="j2-nav-item" href="swift-method-apis.html?swift">Swift Method APIs</a>


  <ul class="j2-nav-sublist">
  
  <li>
    

  <a class="j2-nav-item" href="types/rbmethodargsspec.html?swift">RbMethodArgsSpec</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="swift-method-apis.html?swift#rbmethodcallback">RbMethodCallback</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="swift-method-apis.html?swift#rbboundmethodcallback">RbBoundMethodCallback</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="swift-method-apis.html?swift#rbboundmethodvoidcallback">RbBoundMethodVoidCallback</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="types/rbmethod.html?swift">RbMethod</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="types/rbmethodargs.html?swift">RbMethodArgs</a>



  </li>
  
</ul>



      </li>
      
      <li class="j2-nav-group">
        

  <a class="j2-nav-item" href="other-apis.html?swift">Other APIs</a>


  <ul class="j2-nav-sublist">
  
  <li>
    

  <a class="j2-nav-item" href="other-apis.html?swift#rbblockcallback">RbBlockCallback</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="types/rbblockretention.html?swift">RbBlockRetention</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="types/rbbreak.html?swift">RbBreak</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="types/rbproc.html?swift">RbProc</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="types/rbsymbol.html?swift">RbSymbol</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="types/rbthread.html?swift">RbThread</a>


  <ul class="j2-nav-sublist">
  
  <li>
    

  <a class="j2-nav-item" href="types/rbthread/unblockingfunc.html?swift">UnblockingFunc</a>



  </li>
  
</ul>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="types/rbtype.html?swift">RbType</a>



  </li>
  
</ul>



      </li>
      
      <li class="j2-nav-group">
        

  <a class="j2-nav-item" href="error-handling.html?swift">Error Handling</a>


  <ul class="j2-nav-sublist">
  
  <li>
    

  <a class="j2-nav-item" href="types/rberror.html?swift">RbError</a>


  <ul class="j2-nav-sublist">
  
  <li>
    

  <a class="j2-nav-item" href="types/rberror/history.html?swift">History</a>



  </li>
  
</ul>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="types/rbexception.html?swift">RbException</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="types/rbfailableaccess.html?swift">RbFailableAccess</a>



  </li>
  
</ul>



      </li>
      
      <li class="j2-nav-group">
        

  <a class="j2-nav-item" href="swift-interop.html?swift">Swift Interop</a>


  <ul class="j2-nav-sublist">
  
  <li>
    

  <a class="j2-nav-item" href="types/rbobjectconvertible.html?swift">RbObjectConvertible</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="extensions/string.html?swift">String</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="extensions/bool.html?swift">Bool</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="extensions/uint.html?swift">UInt</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="extensions/uint64.html?swift">UInt64</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="extensions/uint32.html?swift">UInt32</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="extensions/uint16.html?swift">UInt16</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="extensions/uint8.html?swift">UInt8</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="extensions/int.html?swift">Int</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="extensions/int64.html?swift">Int64</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="extensions/int32.html?swift">Int32</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="extensions/int16.html?swift">Int16</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="extensions/int8.html?swift">Int8</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="extensions/double.html?swift">Double</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="extensions/float.html?swift">Float</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="extensions/array.html?swift">Array</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="extensions/arrayslice.html?swift">ArraySlice</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="extensions/dictionary.html?swift">Dictionary</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="extensions/set.html?swift">Set</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="extensions/range.html?swift">Range</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="extensions/closedrange.html?swift">ClosedRange</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="types/rbcomplex.html?swift">RbComplex</a>



  </li>
  
  <li>
    

  <a class="j2-nav-item" href="types/rbrational.html?swift">RbRational</a>



  </li>
  
</ul>



      </li>
      
    </ul>
  </nav>
  
</div>

      <main class="col col-xl-8 j2-article px-lg-4 px-xl-5" id="article-column">
        <article class="j2-article-wrapper" id="main-content">

        <section>
          
          <header>
            <h1 class="j2-anchor">
              
              
              <span>Main APIs</span>
              
            </h1>
          </header>
          
          
          
          
          <p>These types form the main API to RubyGateway.</p>
        </section>

        
<div class="j2-swift j2-always">
<hr/>
<section>
  <h1 class="visually-hidden">Topics</h1>
  
  <section class="j2-swift j2-always">
  
  
  
  
  
    <section id="rbgateway1" class="j2-item j2-swift j2-always">
    <a name="//apple_ref/cpp/Class/class%20RbGateway" class="dashAnchor j2-item-dash-anchor" data-item-id="rbgateway1"></a>
    <h4 class="visually-hidden">class RbGateway</h4>
    
    
    <a class="j2-item-title" href="#_rbgateway1" data-bs-toggle="collapse" role="button" aria-expanded="false" aria-controls="_rbgateway1"><code>
        <span class="j2-swift j2-always"><span class="j2-item-secondary">class </span>RbGateway</span>
        
      </code></a>
    <div class="collapse  j2-item-popopen-wrapper" id="_rbgateway1">
      <div class="j2-item-popopen">
        <div class="j2-item-popopen-pointer" role="none presentation"></div>
        <div class="j2-item-popopen-body">
          
            <div class="clearfix">
              
  


              


<p>Provides top-level Ruby services: information about the Ruby VM, evaluate
expressions, access various kinds of Ruby objects, and define new Ruby
classes, modules, and functions.</p>
<p>You cannot instantiate this type.  Instead RubyGateway exports a public
instance <code>Ruby</code>.  Among other things this permits a dynamic member lookup
programming style.</p>
<p>The Ruby VM is initialized when the object is first accessed and is
automatically stopped when the process ends.  The VM can be manually shut
down before process exit by calling <a href="types/rbgateway1.html?swift#cleanup"><code>RbGateway.cleanup()</code></a> but once this has
been done the VM cannot be restarted and subsequent calls to RubyGateway
services will fail.</p>
<p>The loadpath (where <code>require</code> looks) is set to the <code>lib/ruby</code> directories
adjacent to the <code>libruby</code> the program is linked against and <code>$RUBYLIB</code>.
RubyGems are enabled.</p>
<h2 class="j2-anchor j2-heading heading" id="accessing-ruby-objects">
<span data-anchor-id="accessing-ruby-objects">
Accessing Ruby objects
</span></h2>
<p>The class inherits from <a href="types/rbobjectaccess1.html?swift"><code>RbObjectAccess</code></a> which lets you look up constants
or call functions as you would at the top level of a Ruby script, for example:</p>
<pre><code class="language-swift">import RubyGateway

print(&quot;Ruby version is \(Ruby.version)&quot;)

do {
   try Ruby.require(filename: &quot;rouge&quot;)
   let html = try Ruby.get(&quot;Rouge&quot;).call(&quot;highlight&quot;, args: [&quot;let a = 1&quot;, &quot;swift&quot;, &quot;html&quot;])
} catch {
}
</code></pre>
<p>If you just want to create a Ruby object of some class, see
<a href="types/rbobject13.html?swift#initofclassargskwargs"><code>RbObject.init(ofClass:args:kwArgs:)</code></a>.</p>
<h2 class="j2-anchor j2-heading heading" id="running-ruby-code">
<span data-anchor-id="running-ruby-code">
Running Ruby code
</span></h2>
<p>Use <a href="types/rbgateway1.html?swift#evalruby"><code>RbGateway.eval(ruby:)</code></a> to evaulate a Ruby expression in the current VM.
For example:</p>
<pre><code class="language-swift">let result = try Ruby.eval(ruby: &quot;Rouge.highlight('let a = 1', 'swift', 'html')&quot;)
</code></pre>
<h2 class="j2-anchor j2-heading heading" id="defining-new-ruby-classes">
<span data-anchor-id="defining-new-ruby-classes">
Defining new Ruby classes
</span></h2>
<p>Use <a href="types/rbgateway1.html?swift#defineclass_parentunder"><code>RbGateway.defineClass(_:parent:under:)</code></a> and <a href="types/rbgateway1.html?swift#definemodule_under"><code>RbGateway.defineModule(_:under:)</code></a>
to define new classes and modules.  Then add methods using <a href="types/rbobject13.html?swift#definemethod_argsspecmethod1"><code>RbObject.defineMethod(...)</code></a>
and <a href="types/rbobject13.html?swift#definesingletonmethod_argsspecbody"><code>RbObject.defineSingletonMethod(...)</code></a>.</p>



            </div>
            <h5>Declaration</h5>
            <div class="j2-item-declaration">
              
  <div class="j2-swift j2-always">
    <div class="j2-callout-title" role="heading" aria-level="6">Swift</div>
    <pre><code class="language-swift">public final class RbGateway: <a href="types/rbobjectaccess1.html?swift">RbObjectAccess</a>, <a href="https://developer.apple.com/documentation/swift/sendable?language=swift">Sendable</a></code></pre>
  </div>



            </div>
            



          

          <nav class="j2-item-nav" aria-label="item details">
            
            <span class="j2-item-nav-item">
            
              <span class="j2-swift j2-always"><a href="types/rbgateway1.html?swift">Show members</a></span>
            
            
            </span>
            
            
            <span class="j2-item-nav-item"><a href="https://github.com/johnfairh/RubyGateway/tree/main/Sources/RubyGateway/RbGateway.swift#L61-L170">Show on GitHub</a></span>
            
          </nav>
        </div>
      </div>
    </div>
    
  </section>
  
  
  
  
    <section id="rbobject13" class="j2-item j2-swift j2-always">
    <a name="//apple_ref/cpp/Class/class%20RbObject" class="dashAnchor j2-item-dash-anchor" data-item-id="rbobject13"></a>
    <h4 class="visually-hidden">class RbObject</h4>
    
    
    <a class="j2-item-title" href="#_rbobject13" data-bs-toggle="collapse" role="button" aria-expanded="false" aria-controls="_rbobject13"><code>
        <span class="j2-swift j2-always"><span class="j2-item-secondary">class </span>RbObject</span>
        
      </code></a>
    <div class="collapse  j2-item-popopen-wrapper" id="_rbobject13">
      <div class="j2-item-popopen">
        <div class="j2-item-popopen-pointer" role="none presentation"></div>
        <div class="j2-item-popopen-body">
          
            <div class="clearfix">
              
  


              


<p>A Ruby object.</p>
<p>All Ruby objects whatever their type or class are represented using this
Swift type.</p>
<p>Use <a href="types/rbobject13.html?swift#initofclassargskwargs"><code>RbObject.init(ofClass:args:kwArgs:)</code></a> to create a new Ruby object of
some class:</p>
<pre><code class="language-swift">let myObj = RbObject(ofClass: &quot;MyModule::MyClass&quot;, args: [&quot;arg1&quot;, 25.3])
</code></pre>
<p>See <a href="types/rbobjectaccess1.html?swift"><code>RbObjectAccess</code></a> for ways to call methods, access properties, and find
constants from an <code>RbObject</code>:</p>
<pre><code class="language-swift">try myObj.set(&quot;name&quot;, &quot;fred&quot;)  // explicit property set

let results = try myObj.call(&quot;process&quot;, args: [&quot;arg1&quot;, 100])

let answer = try myObj.call(&quot;pose&quot;, kwArgs: [&quot;questionNumber&quot;: 40])
</code></pre>
<p>See <a href="types/rbgateway1.html?swift"><code>RbGateway</code></a> and its global instance <code>Ruby</code> for access to the Ruby ‘top self’
object to get started finding constants or calling global functions.</p>
<h2 class="j2-anchor j2-heading heading" id="converting-to-and-from-swift-types">
<span data-anchor-id="converting-to-and-from-swift-types">
Converting to and from Swift types
</span></h2>
<p>Convert <code>RbObject</code>s to Swift types using failable initializers or the throwing
<code>convert</code> methods:</p>
<pre><code class="language-swift">let height = Double(myObj)
let allHeights = Array&lt;Double&gt;(myObj)
let heightDb = Dictionary&lt;String, Double&gt;(myObj)

let width = try myObj.convert(to: Double.self)
model.field = try myObj.convert()
</code></pre>
<p>Check <a href="types/rberror.html?swift#history1"><code>RbError.history</code></a> to see the cause of failed initializations.</p>
<p>In the reverse direction, Swift types convert implicitly to <code>RbObject</code>
when passed as arguments via the <a href="types/rbobjectconvertible.html?swift"><code>RbObjectConvertible</code></a> protocol.</p>
<h2 class="j2-anchor j2-heading heading" id="collection-protocols">
<span data-anchor-id="collection-protocols">
Collection protocols
</span></h2>
<p>The conversion example above converts the entire Ruby array to an independent
Swift array.  An alternative is to use <a href="types/rbobject13.html?swift#collection"><code>RbObject.collection</code></a> which provides
a dynamic view onto the Ruby array that supports many Swift collection protocols
so you can update a Ruby array like:</p>
<pre><code class="language-swift">myArrayObj.collection.sort(4..&lt;8)
</code></pre>
<h2 class="j2-anchor j2-heading heading" id="standard-library-conformances">
<span data-anchor-id="standard-library-conformances">
Standard library conformances
</span></h2>
<p><code>RbObject</code> conforms to <a href="https://developer.apple.com/documentation/swift/hashable?language=swift" class="j2-swift"><code>Hashable</code></a><a href="https://developer.apple.com/documentation/swift/hashable?language=objc" class="j2-objc j2-secondary"><code>Hashable</code></a>, <a href="https://developer.apple.com/documentation/swift/equatable?language=swift" class="j2-swift"><code>Equatable</code></a><a href="https://developer.apple.com/documentation/swift/equatable?language=objc" class="j2-objc j2-secondary"><code>Equatable</code></a>, and <a href="https://developer.apple.com/documentation/swift/comparable?language=swift" class="j2-swift"><code>Comparable</code></a><a href="https://developer.apple.com/documentation/swift/comparable?language=objc" class="j2-objc j2-secondary"><code>Comparable</code></a> protocols by
forwarding to the corresponding Ruby methods.  Beware though that it is easy
to trigger Ruby errors here that currently cause RubyGateway to crash.  For
example this is poison:</p>
<pre><code class="language-swift">RbObject(3) &lt; RbObject(&quot;barney&quot;)
</code></pre>
<p>Future releases may add more control over what happens here.</p>
<h2 class="j2-anchor j2-heading heading" id="arithmetic-operators">
<span data-anchor-id="arithmetic-operators">
Arithmetic operators
</span></h2>
<p><code>RbObject</code> conforms to the <a href="https://developer.apple.com/documentation/swift/signednumeric?language=swift" class="j2-swift"><code>SignedNumeric</code></a><a href="https://developer.apple.com/documentation/swift/signednumeric?language=objc" class="j2-objc j2-secondary"><code>SignedNumeric</code></a> protocol by forwarding the regular
arithmetic operators to the corresponding Ruby methods.  This means you can
write <code>let a = b + c</code> where all are <code>RbObject</code>s and get a valid value for <code>a</code>
provided <code>b</code> and <code>c</code> are any of the Ruby numeric values or any Ruby class that
happens to support those operators.</p>
<p>Again you must take ensure that your Ruby objects support these operators or
the program will crash.</p>
<h2 class="j2-anchor j2-heading heading" id="defining-methods">
<span data-anchor-id="defining-methods">
Defining methods
</span></h2>
<p>Use <a href="types/rbobject13.html?swift#definemethod_argsspecmethod1"><code>RbObject.defineMethod(...)</code></a> and <a href="types/rbobject13.html?swift#definesingletonmethod_argsspecbody"><code>RbObject.defineSingletonMethod(...)</code></a> to
add methods implemented in Swift to an object or class.  Use
<a href="types/rbgateway1.html?swift#defineclass_parentunder"><code>RbGateway.defineClass(_:parent:under:)</code></a> to define entirely new classes.</p>



            </div>
            <h5>Declaration</h5>
            <div class="j2-item-declaration">
              
  <div class="j2-swift j2-always">
    <div class="j2-callout-title" role="heading" aria-level="6">Swift</div>
    <pre><code class="language-swift">public final class RbObject: <a href="types/rbobjectaccess1.html?swift">RbObjectAccess</a>, <a href="https://developer.apple.com/documentation/swift/sendable?language=swift">Sendable</a>

extension RbObject: <a href="https://developer.apple.com/documentation/swift/customstringconvertible?language=swift">CustomStringConvertible</a>,
    <a href="https://developer.apple.com/documentation/swift/customdebugstringconvertible?language=swift">CustomDebugStringConvertible</a>,
    <a href="https://developer.apple.com/documentation/swift/customplaygrounddisplayconvertible?language=swift">CustomPlaygroundDisplayConvertible</a>

extension RbObject: <a href="https://developer.apple.com/documentation/swift/expressiblebyarrayliteral?language=swift">ExpressibleByArrayLiteral</a>

extension RbObject: <a href="https://developer.apple.com/documentation/swift/expressiblebybooleanliteral?language=swift">ExpressibleByBooleanLiteral</a>

extension RbObject: <a href="https://developer.apple.com/documentation/swift/expressiblebydictionaryliteral?language=swift">ExpressibleByDictionaryLiteral</a>

extension RbObject: <a href="https://developer.apple.com/documentation/swift/expressiblebyfloatliteral?language=swift">ExpressibleByFloatLiteral</a>

extension RbObject: <a href="https://developer.apple.com/documentation/swift/expressiblebyintegerliteral?language=swift">ExpressibleByIntegerLiteral</a>

extension RbObject: <a href="https://developer.apple.com/documentation/swift/expressiblebystringliteral?language=swift">ExpressibleByStringLiteral</a>

extension RbObject: <a href="https://developer.apple.com/documentation/swift/hashable?language=swift">Hashable</a>, <a href="https://developer.apple.com/documentation/swift/equatable?language=swift">Equatable</a>, <a href="https://developer.apple.com/documentation/swift/comparable?language=swift">Comparable</a>

extension RbObject: <a href="types/rbobjectconvertible.html?swift">RbObjectConvertible</a>

extension RbObject: <a href="https://developer.apple.com/documentation/swift/signednumeric?language=swift">SignedNumeric</a></code></pre>
  </div>



            </div>
            



          

          <nav class="j2-item-nav" aria-label="item details">
            
            <span class="j2-item-nav-item">
            
              <span class="j2-swift j2-always"><a href="types/rbobject13.html?swift">Show members</a></span>
            
            
            </span>
            
            
            <span class="j2-item-nav-item"><a href="https://github.com/johnfairh/RubyGateway/tree/main/Sources/RubyGateway/RbObject.swift#L88-L190">Show on GitHub</a></span>
            
          </nav>
        </div>
      </div>
    </div>
    
  </section>
  
  
  
  
    <section id="rbobjectaccess1" class="j2-item j2-swift j2-always">
    <a name="//apple_ref/cpp/Class/class%20RbObjectAccess" class="dashAnchor j2-item-dash-anchor" data-item-id="rbobjectaccess1"></a>
    <h4 class="visually-hidden">class RbObjectAccess</h4>
    
    
    <a class="j2-item-title" href="#_rbobjectaccess1" data-bs-toggle="collapse" role="button" aria-expanded="false" aria-controls="_rbobjectaccess1"><code>
        <span class="j2-swift j2-always"><span class="j2-item-secondary">class </span>RbObjectAccess</span>
        
      </code></a>
    <div class="collapse  j2-item-popopen-wrapper" id="_rbobjectaccess1">
      <div class="j2-item-popopen">
        <div class="j2-item-popopen-pointer" role="none presentation"></div>
        <div class="j2-item-popopen-body">
          
            <div class="clearfix">
              
  


              


<p>Provides services to manipulate a Ruby object:</p>
<ul>
<li>Call methods;</li>
<li>Access properties and instance variables;</li>
<li>Access class variables;</li>
<li>Access global variables;</li>
<li>Find constants, classes, and modules.</li>
</ul>
<p>The class is abstract.  You use it via <a href="types/rbobject13.html?swift"><code>RbObject</code></a> and the global <code>Ruby</code> instance
of <a href="types/rbgateway1.html?swift"><code>RbGateway</code></a>.</p>
<p>By default all methods throw <a href="types/rberror.html?swift"><code>RbError</code></a>s if anything goes wrong including
when Ruby raises an exception.  Use the <a href="types/rbobjectaccess1.html?swift#failable"><code>RbObjectAccess.failable</code></a> adapter to
access an alternative API that returns <code>nil</code> on errors instead.  You can still
see any Ruby exceptions via <a href="types/rberror.html?swift#history1"><code>RbError.history</code></a>.</p>
<h2 class="j2-anchor j2-heading heading" id="calling-methods">
<span data-anchor-id="calling-methods">
Calling methods
</span></h2>
<p>Ruby has a few different ways to call methods that are reflected in the
various Swift methods here and their types.  The degrees of freedom are:</p>
<ol>
<li>Call method by name or by symbol;</li>
<li>Pass positional and/or keyword arguments;</li>
<li>Optionally pass a block that can be expressed as a Swift function or
a Ruby Proc.</li>
<li>Method can either raise an exception or return a value.</li>
</ol>
<p>From the simple:</p>
<pre><code class="language-swift">try! obj.call(&quot;myMethod&quot;)
</code></pre>
<p>…to more baroque:</p>
<pre><code class="language-swift">do {
    let result =
         try obj.call(symbol: myMethodSymbol,
                      args: [1, &quot;3.5&quot;, myHash],
                      kwArgs: [(&quot;mode&quot;, RbSymbol(&quot;debug&quot;)]) { blockArgs in
                          blockArgs.forEach {
                              process($0)
                          }
                          return .nilObject
                      }
} catch RbError.rubyException(let exn) {
    handleErrors(error)
} catch {
    ...
}
</code></pre>
<p>When passing a Swift function as a block there are two methods to choose from.  If the block is used
only within the method execution you can provide a non-escaping, non-sendable function; if the block
is persisted and used later then you must provide a retention rule and an escaping, sendable function.</p>



            </div>
            <h5>Declaration</h5>
            <div class="j2-item-declaration">
              
  <div class="j2-swift j2-always">
    <div class="j2-callout-title" role="heading" aria-level="6">Swift</div>
    <pre><code class="language-swift">public class RbObjectAccess</code></pre>
  </div>



            </div>
            



          

          <nav class="j2-item-nav" aria-label="item details">
            
            <span class="j2-item-nav-item">
            
              <span class="j2-swift j2-always"><a href="types/rbobjectaccess1.html?swift">Show members</a></span>
            
            
            </span>
            
            
            <span class="j2-item-nav-item"><a href="https://github.com/johnfairh/RubyGateway/tree/main/Sources/RubyGateway/RbObjectAccess.swift#L61-L125">Show on GitHub</a></span>
            
          </nav>
        </div>
      </div>
    </div>
    
  </section>
  
  
  
  
    <section id="rbobjectcollection" class="j2-item j2-swift j2-always">
    <a name="//apple_ref/cpp/Struct/struct%20RbObjectCollection" class="dashAnchor j2-item-dash-anchor" data-item-id="rbobjectcollection"></a>
    <h4 class="visually-hidden">struct RbObjectCollection</h4>
    
    
    <a class="j2-item-title" href="#_rbobjectcollection" data-bs-toggle="collapse" role="button" aria-expanded="false" aria-controls="_rbobjectcollection"><code>
        <span class="j2-swift j2-always"><span class="j2-item-secondary">struct </span>RbObjectCollection</span>
        
      </code></a>
    <div class="collapse  j2-item-popopen-wrapper" id="_rbobjectcollection">
      <div class="j2-item-popopen">
        <div class="j2-item-popopen-pointer" role="none presentation"></div>
        <div class="j2-item-popopen-body">
          
            <div class="clearfix">
              
  


              


<p>A view onto a Ruby array using Swift collection protocols.</p>
<p>This is an adapter type that wraps an <a href="types/rbobject13.html?swift"><code>RbObject</code></a> and adopts
Swift collection protocols for use with an underlying Ruby
array (or any Ruby object that supports <code>length</code>, <code>[]</code>, and
<code>[]=</code>.)</p>
<p>For example:</p>
<pre><code class="language-swift">myObj.collection.replaceSubrange(lower..&lt;upper, with: otherArray)
</code></pre>
<p>This is separate to <a href="types/rbobject13.html?swift"><code>RbObject</code></a> to avoid dumping all the
collection protocol members into its dynamic member lookup
namespace.</p>



            </div>
            <h5>Declaration</h5>
            <div class="j2-item-declaration">
              
  <div class="j2-swift j2-always">
    <div class="j2-callout-title" role="heading" aria-level="6">Swift</div>
    <pre><code class="language-swift">public struct RbObjectCollection: <a href="https://developer.apple.com/documentation/swift/randomaccesscollection?language=swift">RandomAccessCollection</a>,
    <a href="https://developer.apple.com/documentation/swift/mutablecollection?language=swift">MutableCollection</a>,
    <a href="https://developer.apple.com/documentation/swift/rangereplaceablecollection?language=swift">RangeReplaceableCollection</a>,
    <a href="types/rbobjectconvertible.html?swift">RbObjectConvertible</a></code></pre>
  </div>



            </div>
            



          

          <nav class="j2-item-nav" aria-label="item details">
            
            <span class="j2-item-nav-item">
            
              <span class="j2-swift j2-always"><a href="types/rbobjectcollection.html?swift">Show members</a></span>
            
            
            </span>
            
            
            <span class="j2-item-nav-item"><a href="https://github.com/johnfairh/RubyGateway/tree/main/Sources/RubyGateway/RbObjectCollection.swift#L23-L74">Show on GitHub</a></span>
            
          </nav>
        </div>
      </div>
    </div>
    
  </section>
  
  
</section>

  
</section>
</div>



        
        <div class="flex-grow-1"></div>
        <nav aria-label="paging" class="j2-pagination pb-3 pt-2">
  <div id="pagination-prev" class="flex-fill">
  
    <a class="j2-swift" href="guides/todo.html?swift" aria-keyshortcuts="p">
  <span aria-hidden="true">&laquo; </span>TODO
</a>

    <a class="j2-objc j2-secondary" href="guides/todo.html?swift" aria-keyshortcuts="p">
  <span aria-hidden="true">&laquo; </span>TODO
</a>

  
  
  </div>
  <div id="pagination-next" class="flex-fill text-end">
  
    <a class="j2-swift" href="types/rbgateway1.html?swift" aria-keyshortcuts="n">
  RbGateway<span aria-hidden="true"> &raquo;</span>
</a>

    <a class="j2-objc j2-secondary" href="types/rbgateway1.html?swift" aria-keyshortcuts="n">
  RbGateway<span aria-hidden="true"> &raquo;</span>
</a>

  
  
  </div>
</nav>

        

        </article>
      </main>

      <div class="col-xl d-none d-xl-block j2-aux-nav" id="aux-nav-column">
  <div class="j2-aux-nav-wrapper">
    
    
    <h6 class="j2-inline-heading">Actions</h6>
    <ul class="j2-aux-group">
      
      <li><a class="j2-aux-action" id="action-search" href="#" role="button" aria-keyshortcuts="/">Search (/)</a></li>
      
      
      
      <li><a class="j2-aux-action" id="action-collapse" href="#" role="button" aria-keyshortcuts="a">
          <span id="action-collapse-expand">Open all (a)</span>
          <span id="action-collapse-collapse" class="d-none">Close all (a)</span>
      </a></li>
      
      
      
    </ul>
    
  </div>
</div>


    </div> <!-- end row -->

    <footer class="row">
  <div class="col j2-footer small pt-2">
    <p>Distributed under the MIT license.  Maintained by <a href="mailto:johnfairh@gmail.com">John Fairhurst</a>.</p>
    
    <p>Generated by <a class="link" href="https://github.com/johnfairh/Bebop" target="_blank" rel="external noopener">Bebop v1.12.0</a> using the FW2020 theme, based on technology from <a class="link" href="https://github.com/realm/jazzy" target="_blank" rel="external noopener">jazzy ♪♫</a>.</p>
    
  </div>
</footer>

  </div> <!-- container -->

  <script src="js/dependencies.min.js"></script>
  
  <script src="js/fw2020.js"></script>
  </body>
</html>
